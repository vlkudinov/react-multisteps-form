(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/delete.93998245.svg"},21:function(e,t,a){e.exports=a(48)},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(18),s=a.n(l),c=a(4),i=a(5),u=a(8),m=a(6),o=a(9),p=a(10),d=a(7),f=a(2),b=a(19),h=a.n(b),v=a(3),g=a.n(v),_={stepOne:{name:{label:"Name"},surname:{label:"Surname"},email:{label:"Email"},password:{label:"Password"}},stepTwo:{nickname:{label:"Nickname"},phone:{label:"Phone"},country:{label:"Country"},city:{label:"City"}}},E=function(e){var t=e.currentStep,a=e.form,r=e.errors,l=e.handleChange;return 1!==t?null:n.a.createElement(n.a.Fragment,null,Object.keys(_.stepOne).map(function(e,t){var s=_.stepOne[e].label,c=g()({field:!0,form__field:!0,field_error:r[e],field_typing:a[e]});return n.a.createElement("div",{className:c,key:t},n.a.createElement("input",{type:"text",className:"field__input",value:a[e],onChange:function(t){return l(e,t)}}),n.a.createElement("label",{className:"field__label"},s),n.a.createElement("span",{className:"field__message"},"*".concat(s," is reqiured!")))}))},S=function(e){var t=e.currentStep,a=e.form,r=e.errors,l=e.handleChange;return 2!==t?null:n.a.createElement(n.a.Fragment,null,Object.keys(_.stepTwo).map(function(e,t){var s=_.stepTwo[e].label,c=g()({field:!0,form__field:!0,field_error:r[e],field_typing:a[e]});return n.a.createElement("div",{className:c,key:t},n.a.createElement("input",{type:"text",className:"field__input",value:a[e],onChange:function(t){return l(e,t)}}),n.a.createElement("label",{className:"field__label"},s),n.a.createElement("span",{className:"field__message"},"*".concat(s," is reqiured!")))}))},y=a(20),O=a.n(y),N=function(e){var t=e.currentStep,a=e.images,r=e.error,l=e.handleChange,s=e.handleDelete,c=g()({form__upload:!0,upload:!0,upload_error:r});return 3!==t?null:n.a.createElement("div",{className:c},n.a.createElement("div",{className:"upload__button"},n.a.createElement("input",{type:"file",className:"upload__input",onChange:function(e){return l(e)},multiple:!0,accept:"image/*"})),n.a.createElement("span",{className:"upload__message"},"*No images selected!"),n.a.createElement("div",{className:"upload__preview preview"},n.a.createElement("ul",{className:"preview__list"},a.map(function(e,t){return n.a.createElement("li",{key:t,className:"preview__item"},n.a.createElement("img",{className:"preview__img",src:e.preview,alt:""}),n.a.createElement("img",{src:O.a,className:"preview__icon",onClick:function(){return s(t)}}))}))))},j=function(e){var t=e.currentStep,a=e.steps,r=void 0===a?3:a;return n.a.createElement("div",{className:"form__step-markers step-markers"},n.a.createElement("ul",{className:"step-markers__list"},Array.from(Array(r).keys()).map(function(e,a){var r=g()({"step-markers__item":!0,"step-markers__item_active":a+1<=t});return n.a.createElement("li",{key:a,className:r},n.a.createElement("span",{className:"step-markers__number"},a+1))})))},k=function(e){var t=e.currentStep,a=e.handleNext;return t<3?n.a.createElement("button",{type:"button",className:"button-group__button button-group__button_next",onClick:a},"Next"):null},w=function(e){var t=e.currentStep,a=e.handlePrev;return 1!==t?n.a.createElement("button",{type:"button",className:"button-group__button button-group__button_prev",onClick:a},"Back"):null},C=(a(46),function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={currentStep:1,form:{name:"",surname:"",email:"",password:"",nickname:"",phone:"",country:"",city:"",images:[]},submittedMessage:"",errors:{}},a.nextStep=function(){var e=a.state.currentStep;a.validateStep()&&(e=e<3?e+1:e,a.setState({currentStep:e}))},a.prevStep=function(){var e=a.state.currentStep;e=e<=1?1:e-1,a.setState({currentStep:e})},a.validateImages=function(e){var t={};return e.length?t.images=null:t.images="noImages",t},a.validateField=function(e,t){var a={};return a[e]=t?null:"noValue",a},a.handleImageDelete=function(e){var t=a.state.form,r=t.images.filter(function(t,a){return a!==e}),n=a.validateImages(r);a.setState({form:Object(f.a)({},t,{images:r}),errors:Object(f.a)({},a.state.errors,n)})},a.handleChangeField=function(e,t){var r=t.target.value,n=a.state.form,l=a.validateField(e,r);a.setState({form:Object(f.a)({},n,Object(d.a)({},e,r)),errors:Object(f.a)({},a.state.errors,l)})},a.handleChangeImages=function(e){var t=a.state.form,r=e.target.files,n=Object(p.a)(r).map(function(e){return{file:e,preview:URL.createObjectURL(e)}}),l=[].concat(Object(p.a)(t.images),Object(p.a)(n)),s=a.validateImages(l);return e.target.value=null,a.setState({form:Object(f.a)({},t,{images:l}),errors:Object(f.a)({},a.state.errors,s)})},a.handleSubmitForm=function(e){e.preventDefault();var t=a.state.form,r=new FormData;Object.keys(t).map(function(e){return r.append("".concat(e),t[e])}),t.images.map(function(e,t){return r.append("file".concat(t),e.file)}),a.setState({sending:!0}),h.a.post("/form",r).then(function(e){a.setState({submittedMessage:e.data})}).catch(function(){return a.setState({submittedMessage:"Error"})})},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"validateStep",value:function(){var e=this,t=this.state,a=t.form,r=t.currentStep,n=_.stepOne,l=_.stepTwo,s={};return 1===r&&Object.keys(n).map(function(t){s=Object(f.a)({},s,e.validateField(t,a[t]))}),2===r&&Object.keys(l).map(function(t){s=Object(f.a)({},s,e.validateField(t,a[t]))}),this.setState({errors:Object(f.a)({},this.state.errors,s)}),!Object.values(s).filter(function(e){return e}).length}},{key:"renderForm",value:function(){var e=this.state,t=e.currentStep,a=e.form,r=e.errors;return n.a.createElement("form",{onSubmit:this.handleSubmitForm,className:"form",encType:"multipart/form-data"},n.a.createElement(j,{currentStep:t}),n.a.createElement(E,{currentStep:t,form:a,errors:r,handleChange:this.handleChangeField}),n.a.createElement(S,{currentStep:t,form:a,errors:r,handleChange:this.handleChangeField}),n.a.createElement(N,{currentStep:t,error:r.images,images:a.images,handleChange:this.handleChangeImages,handleDelete:this.handleImageDelete}),n.a.createElement("div",{className:"form__button-group button-group"},n.a.createElement(w,{currentStep:this.state.currentStep,handlePrev:this.prevStep}),n.a.createElement(k,{currentStep:this.state.currentStep,handleNext:this.nextStep})))}},{key:"render",value:function(){return this.renderForm()}}]),t}(n.a.Component)),F=(a(47),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",null,"Multi-Step Form"),n.a.createElement(C,null)))}}]),t}(r.Component));s.a.render(n.a.createElement(F,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.f31a81e7.chunk.js.map